let s:dotfile_path = expand('<sfile>:p:h:h')
let s:vimrc_path = s:dotfile_path . '/vim'

let &rtp = s:vimrc_path . ',' . &rtp . ',' . s:vimrc_path . '/after'
let &packpath =  s:vimrc_path . ',' . &packpath

if isdirectory(s:dotfile_path . '/.venv')
    if has('win32') || has('win64')
        let g:py_binary_path = s:dotfile_path . '/.venv/Scripts'
        let g:python3_host_prog= g:py_binary_path . '/python.exe'
    else
        let g:py_binary_path = s:dotfile_path . '/.venv/bin'
        let g:python3_host_prog= g:py_binary_path . '/python'
    endif
else
    let g:py_binary_path = "/usr/local/bin"
    let g:python3_host_prog= g:py_binary_path . '/python3'
endif

if has('win32') || has('win64')
    set shell=winpyt
endif

if has('nvim')
lua <<EOF
    if vim.loader then
        vim.loader.enable()
    end

    require'key-mappings'
    require'colorscheme-config'
    require'autopairs'
    require'dir-tree'
    require'colorizer-config'
    require'completion'
    require'git'
    require'lsp'
    require'rooter'
    require'snippets'
    require'statusline'
    require'plugins'
    require'huble'
EOF
endif
" 

" --- MY SETTINGS ---------------------
" load the settings after adding packages

execute 'source ' . s:vimrc_path . '/settings.vim'
